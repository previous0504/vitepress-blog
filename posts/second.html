<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue3å­¦ä¹ ç¬”è®° | Tao's blog</title>
    <meta name="description" content="è·Ÿç€bç«™å°æ»¡zså­¦ä¹ vue3">
    <link rel="stylesheet" href="/vitepress-blog/assets/style.f398cb37.css">
    <link rel="modulepreload" href="/vitepress-blog/assets/Home.453b9f11.js">
    <link rel="modulepreload" href="/vitepress-blog/assets/app.4138e7bc.js">
    <link rel="modulepreload" href="/vitepress-blog/assets/posts_second.md.7b4c6e0a.lean.js">
    <link rel="modulepreload" href="/vitepress-blog/assets/app.4138e7bc.js">
    <meta name="twitter:title" content="vue3å­¦ä¹ ç¬”è®° | Tao&#39;s blog">
    <meta property="og:title" content="vue3å­¦ä¹ ç¬”è®° | Tao&#39;s blog">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-40587210><div class="sidebar-button" data-v-40587210><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/vitepress-blog/" aria-label="Tao&#39;s blog, back to home" data-v-40587210 data-v-7ac13a1e><img class="logo" src="/vitepress-blog/favicon.ico" alt="Logo" data-v-7ac13a1e> Tao&#39;s blog</a><div class="flex-grow" data-v-40587210></div><div class="nav" data-v-40587210><nav class="nav-links" data-v-40587210 data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/vitepress-blog/" data-v-49fe041d>é¦–é¡µ <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/vitepress-blog/pages/docs" data-v-49fe041d>å½’æ¡£ <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/vitepress-blog/pages/tags" data-v-49fe041d>æ ‡ç­¾ <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/vitepress-blog/pages/about" data-v-49fe041d>å…³äº <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-17c48e2f><nav class="nav-links nav" data-v-17c48e2f data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/vitepress-blog/" data-v-49fe041d>é¦–é¡µ <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/vitepress-blog/pages/docs" data-v-49fe041d>å½’æ¡£ <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/vitepress-blog/pages/tags" data-v-49fe041d>æ ‡ç­¾ <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/vitepress-blog/pages/about" data-v-49fe041d>å…³äº <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-17c48e2f><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#ä»‹ç»vue">ä»‹ç»vue</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#npm-run-devè¯¦è§£">npm run devè¯¦è§£</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#è™šæ‹Ÿdomã€diffç®—æ³•">è™šæ‹Ÿdomã€diffç®—æ³•</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#_1-æ— keyçš„æ—¶å€™">1.æ— keyçš„æ—¶å€™</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2-æœ‰keyçš„æ—¶å€™">2.æœ‰keyçš„æ—¶å€™</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å“åº”å¼åŸç†">å“åº”å¼åŸç†</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#ref">Ref</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#reactive">Reactive</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#computed">Computed</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#watch">Watch</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ç”Ÿå‘½å‘¨æœŸ">ç”Ÿå‘½å‘¨æœŸ</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#onbeforemount">onBeforeMount()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#onmounted">onMounted()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#onbeforeupdate">onBeforeUpdate()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#onupdated">onUpdated()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#onbeforeunmount">onBeforeUnmount()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#onunmounted">onUnmounted()</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#çˆ¶å­ç»„ä»¶ä¼ å‚">çˆ¶å­ç»„ä»¶ä¼ å‚</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#defineprops">defineProps</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#defineemits">defineEmits</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ref-defineexpose">ref (defineExpose)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#æ¡ˆä¾‹-å°è£…ç€‘å¸ƒæµäº‹ä»¶">æ¡ˆä¾‹(å°è£…ç€‘å¸ƒæµäº‹ä»¶)</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å…¨å±€ç»„ä»¶ï¼Œå±€éƒ¨ç»„ä»¶ï¼Œé€’å½’ç»„ä»¶">å…¨å±€ç»„ä»¶ï¼Œå±€éƒ¨ç»„ä»¶ï¼Œé€’å½’ç»„ä»¶</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#å…¨å±€ç»„ä»¶">å…¨å±€ç»„ä»¶</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#é€’å½’ç»„ä»¶">é€’å½’ç»„ä»¶</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#åŠ¨æ€ç»„ä»¶">åŠ¨æ€ç»„ä»¶</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#æ’æ§½">æ’æ§½</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#åŒ¿åæ’æ§½">åŒ¿åæ’æ§½</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å…·åæ’æ§½">å…·åæ’æ§½</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ä½œç”¨åŸŸæ’æ§½">ä½œç”¨åŸŸæ’æ§½</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#åŠ¨æ€æ’æ§½">åŠ¨æ€æ’æ§½</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å¼‚æ­¥ç»„ä»¶-suspense">å¼‚æ­¥ç»„ä»¶&amp;Suspense</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#ajax-å¼‚æ­¥çš„javascriptå’Œxml">Ajax(å¼‚æ­¥çš„javascriptå’ŒXML)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å°è£…axios">å°è£…axios</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#suspense">Suspense</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#teleport">Teleport</a><!----></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-8fcebc32><div class="container" data-v-8fcebc32><!--[--><!--]--><div style="position:relative;" class="content" data-v-8fcebc32><div><h2 id="ä»‹ç»vue" tabindex="-1">ä»‹ç»vue <a class="header-anchor" href="#ä»‹ç»vue" aria-hidden="true">#</a></h2><p>vueä½¿ç”¨äº†MVVM(Model-View-ViewModel) æ¶æ„</p><p>1.view:è§†å›¾å±‚(UIç”¨æˆ·ç•Œé¢)</p><p>2.viewModel:ä¸šåŠ¡é€»è¾‘å±‚(ä¸€åˆ‡jså¯è§†ä¸ºä¸šåŠ¡é€»è¾‘)</p><p>3.model:æ•°æ®å±‚(å­˜å‚¨æ•°æ®åŠå¯¹æ•°æ®çš„å¤„ç†å¦‚å¢åˆ æ”¹æŸ¥)</p><p><img src="/vitepress-blog/imgs/mvvm.png" alt="image"></p><h2 id="npm-run-devè¯¦è§£" tabindex="-1">npm run devè¯¦è§£ <a class="header-anchor" href="#npm-run-devè¯¦è§£" aria-hidden="true">#</a></h2><p>å…ˆä»æœ¬åœ°çš„node_modulesä¸­æŸ¥æ‰¾.binæ–‡ä»¶å¤¹é‡Œæ‰¾æœ‰æ²¡æœ‰viteå¯ä»¥æ‰§è¡Œï¼Œå¦‚æœæ²¡æœ‰ï¼Œä¼šå»å…¨å±€æ‰¾ï¼Œå…¨å±€æ²¡æœ‰çš„è¯ä¼šå»æ‰¾ç¯å¢ƒå˜é‡ï¼Œç¯å¢ƒå˜é‡æ²¡æœ‰çš„è¯ä¼šæŠ¥é”™ã€‚</p><h2 id="è™šæ‹Ÿdomã€diffç®—æ³•" tabindex="-1">è™šæ‹Ÿdomã€diffç®—æ³• <a class="header-anchor" href="#è™šæ‹Ÿdomã€diffç®—æ³•" aria-hidden="true">#</a></h2><ul><li>ä½¿ç”¨ASTé™æ€èŠ‚ç‚¹ğŸŒ²æ¥ä»£æ›¿domèŠ‚ç‚¹</li></ul><h3 id="_1-æ— keyçš„æ—¶å€™" tabindex="-1">1.æ— keyçš„æ—¶å€™ <a class="header-anchor" href="#_1-æ— keyçš„æ—¶å€™" aria-hidden="true">#</a></h3><p><img src="/vitepress-blog/imgs/nokey.png" alt="image"></p><h3 id="_2-æœ‰keyçš„æ—¶å€™" tabindex="-1">2.æœ‰keyçš„æ—¶å€™ <a class="header-anchor" href="#_2-æœ‰keyçš„æ—¶å€™" aria-hidden="true">#</a></h3><p><img src="/vitepress-blog/imgs/haskey.png" alt="image"></p><p>æœ€é•¿é€’å¢å­åºåˆ— * leetcode-300</p><p><a href="https://leetcode.cn/problems/longest-increasing-subsequence/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/longest-increasing-subsequence/</a></p><p>1.åŠ¨æ€è§„åˆ’(Dp)ï¼Œæ—¶é—´å¤æ‚åº¦O(n)Â²</p><div class="language-javascript"><pre><code> <span class="token operator">*</span><span class="token operator">/</span>
<span class="token keyword">var</span> <span class="token function-variable function">lengthOfLIS</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">let</span> dp <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> length<span class="token operator">:</span> nums<span class="token punctuation">.</span>length <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
                
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>dp<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>2.è´ªå¿ƒç®—æ³•+äºŒåˆ†æ³•æŸ¥æ‰¾</p><div class="language-javascript"><pre><code><span class="token keyword">var</span> <span class="token function-variable function">lengthOfLIS</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœå½“å‰æ•°å€¼å¤§äºå·²é€‰ç»“æœçš„æœ€åä¸€ä½ï¼Œåˆ™ç›´æ¥å¾€åæ–°å¢ï¼Œè‹¥å½“å‰æ•°å€¼æ›´å°ï¼Œåˆ™ç›´æ¥æ›¿æ¢å‰é¢ç¬¬ä¸€ä¸ªå¤§äºå®ƒçš„æ•°å€¼</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> result<span class="token punctuation">[</span>result<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            result<span class="token punctuation">[</span>result<span class="token punctuation">.</span>length<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// äºŒåˆ†æŸ¥æ‰¾ï¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºå½“å‰æ•°å€¼çš„ç»“æœè¿›è¡Œæ›¿æ¢</span>
            <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> right <span class="token operator">=</span> result<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> middle <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;&gt;</span><span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">[</span>middle<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    left <span class="token operator">=</span> middle <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    right <span class="token operator">=</span> middle<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// æ›¿æ¢å½“å‰ä¸‹æ ‡</span>
            result<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="å“åº”å¼åŸç†" tabindex="-1">å“åº”å¼åŸç† <a class="header-anchor" href="#å“åº”å¼åŸç†" aria-hidden="true">#</a></h2><p>æœªå®Œå¾…ç»­â€¦â€¦</p><h3 id="ref" tabindex="-1">Ref <a class="header-anchor" href="#ref" aria-hidden="true">#</a></h3><ul><li><p><strong>ref</strong>ï¼Œæ¥å—ä¸€ä¸ªå†…éƒ¨å€¼ï¼Œè¿”å›ä¸€ä¸ªå“åº”å¼ã€å¯æ›´æ”¹çš„refå¯¹è±¡ï¼Œåªæœ‰ä¸€ä¸ªæŒ‡å‘å…¶å†…éƒ¨å€¼çš„å±æ€§.value</p></li><li><p><strong>isRef</strong>ï¼Œæ£€æµ‹æŸä¸ªå€¼æ˜¯å¦ä¸ºref</p></li><li><p><strong>toRef</strong>ï¼ŒåŸºäºå“åº”å¼å¯¹è±¡ä¸Šçš„ä¸€ä¸ªå±æ€§ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ refã€‚è¿™æ ·åˆ›å»ºçš„ ref ä¸å…¶æºå±æ€§ä¿æŒåŒæ­¥ï¼šæ”¹å˜æºå±æ€§çš„å€¼å°†æ›´æ–° ref çš„å€¼ï¼Œåä¹‹äº¦ç„¶ã€‚</p><div class="language-javascript"><pre><code><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  bar<span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> fooRef <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// æ›´æ”¹è¯¥ ref ä¼šæ›´æ–°æºå±æ€§</span>
fooRef<span class="token punctuation">.</span>value<span class="token operator">++</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>foo<span class="token punctuation">)</span> <span class="token comment">// 2</span>

<span class="token comment">// æ›´æ”¹æºå±æ€§ä¹Ÿä¼šæ›´æ–°è¯¥ ref</span>
state<span class="token punctuation">.</span>foo<span class="token operator">++</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fooRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 3</span>

</code></pre></div></li><li><p><strong>toRefs</strong></p><div class="language-javascript"><pre><code><span class="token keyword">function</span> <span class="token function">useFeatureX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    foo<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    bar<span class="token operator">:</span> <span class="token number">2</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// ...åŸºäºçŠ¶æ€çš„æ“ä½œé€»è¾‘</span>

  <span class="token comment">// åœ¨è¿”å›æ—¶éƒ½è½¬ä¸º ref</span>
  <span class="token keyword">return</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¯ä»¥è§£æ„è€Œä¸ä¼šå¤±å»å“åº”æ€§</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useFeatureX</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p><strong>shallowRef</strong> æµ…å±‚çš„å“åº”å¼ å¯ç”¨<strong>triggerRef</strong> å¼ºåˆ¶è§¦å‘ä¾èµ–äºä¸€ä¸ª<a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowref" target="_blank" rel="noopener noreferrer">æµ…å±‚ ref</a> çš„å‰¯ä½œç”¨</p><div class="language-javascript"><pre><code><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// ä¸ä¼šè§¦å‘æ›´æ”¹</span>
state<span class="token punctuation">.</span>value<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">2</span>

<span class="token comment">// ä¼šè§¦å‘æ›´æ”¹</span>
state<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>
</code></pre></div></li><li><p>**customRef ** è‡ªå®šä¹‰çš„refï¼Œå¯ä»¥åŠ å…¥é˜²æŠ–ç­‰åŠŸèƒ½</p></li></ul><h3 id="reactive" tabindex="-1">Reactive <a class="header-anchor" href="#reactive" aria-hidden="true">#</a></h3><ul><li><p>reactive è¿”å›ä¸€ä¸ªå¯¹è±¡çš„å“åº”å¼ä»£ç†</p></li><li><p>shallowReactive</p></li><li><p>toRaw è¿”å›åŸå§‹å¯¹è±¡</p></li></ul><h3 id="computed" tabindex="-1">Computed <a class="header-anchor" href="#computed" aria-hidden="true">#</a></h3><div class="language-javascript"><pre><code><span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> plusOne <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> count<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">.</span>value <span class="token operator">=</span> val <span class="token operator">-</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

plusOne<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 0</span>
</code></pre></div><h3 id="watch" tabindex="-1">Watch <a class="header-anchor" href="#watch" aria-hidden="true">#</a></h3><ul><li><strong>watch</strong></li></ul><div class="language-javascript"><pre><code><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// ç›‘å¬ä¸€ä¸ªgetterå‡½æ•°</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>count<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">count<span class="token punctuation">,</span> prevCount</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token comment">// ç›‘å¬å¤šä¸ªå€¼</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>fooRef<span class="token punctuation">,</span> barRef<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>foo<span class="token punctuation">,</span> bar<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>prevFoo<span class="token punctuation">,</span> prevBar<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><p><strong>watchEffect</strong> é»˜è®¤immediate:trueï¼Œæ— éœ€æŒ‡å®šå±æ€§</p><div class="language-javascript"><pre><code><span class="token keyword">const</span> stop <span class="token operator">=</span> <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">effect</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> ipt<span class="token operator">:</span>HTMLInputElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;#ipt&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLInputElement
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ipt<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message1<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;before&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
 
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  flush<span class="token operator">:</span><span class="token string">&#39;post&#39;</span><span class="token comment">//åœ¨domæ¸²æŸ“ä¹‹åè°ƒç”¨ï¼Œé»˜è®¤ä¸ºpre</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><h2 id="ç”Ÿå‘½å‘¨æœŸ" tabindex="-1">ç”Ÿå‘½å‘¨æœŸ <a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a></h2><p>ä¸€ä¸ªç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯çš„è¿‡ç¨‹ç§°ä¸ºç”Ÿå‘½å‘¨æœŸ</p><p>vue3çš„ç»„åˆå¼api(setup)æ˜¯æ²¡æœ‰ beforeCreate å’Œ created ç”Ÿå‘½å‘¨æœŸçš„</p><h3 id="onbeforemount" tabindex="-1">onBeforeMount() <a class="header-anchor" href="#onbeforemount" aria-hidden="true">#</a></h3><p>åœ¨ç»„ä»¶DOMå®é™…æ¸²æŸ“å®‰è£…ä¹‹å‰è°ƒç”¨ï¼Œæ ¹å…ƒç´ è¿˜ä¸å­˜åœ¨</p><h3 id="onmounted" tabindex="-1">onMounted() <a class="header-anchor" href="#onmounted" aria-hidden="true">#</a></h3><p>åœ¨ç»„ä»¶çš„ç¬¬ä¸€æ¬¡æ¸²æŸ“åè°ƒç”¨ï¼Œå…è®¸ç›´æ¥DOMè®¿é—®</p><h3 id="onbeforeupdate" tabindex="-1">onBeforeUpdate() <a class="header-anchor" href="#onbeforeupdate" aria-hidden="true">#</a></h3><p>æ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹ŸDOMæ‰“è¡¥ä¸ä¹‹å‰</p><h3 id="onupdated" tabindex="-1">onUpdated() <a class="header-anchor" href="#onupdated" aria-hidden="true">#</a></h3><p>DOMæ›´æ–°åï¼Œupdatedçš„æ–¹æ³•å³ä¼šè°ƒç”¨</p><h3 id="onbeforeunmount" tabindex="-1">onBeforeUnmount() <a class="header-anchor" href="#onbeforeunmount" aria-hidden="true">#</a></h3><p>åœ¨å¸è½½ç»„ä»¶å®ä¾‹ä¹‹å‰è°ƒç”¨</p><h3 id="onunmounted" tabindex="-1">onUnmounted() <a class="header-anchor" href="#onunmounted" aria-hidden="true">#</a></h3><p>å¸è½½ç»„ä»¶å®ä¾‹åè°ƒç”¨ï¼Œè°ƒç”¨æ­¤é’©å­æ‰€æœ‰æŒ‡ä»¤éƒ½è¢«è§£é™¤ç»‘å®šï¼Œæ‰€æœ‰æ—¶é—´ä¾¦å¬å™¨éƒ½è¢«ç§»é™¤ï¼Œæ‰€æœ‰å­ç»„ä»¶å®ä¾‹è¢«å¸è½½</p><h2 id="çˆ¶å­ç»„ä»¶ä¼ å‚" tabindex="-1">çˆ¶å­ç»„ä»¶ä¼ å‚ <a class="header-anchor" href="#çˆ¶å­ç»„ä»¶ä¼ å‚" aria-hidden="true">#</a></h2><h3 id="defineprops" tabindex="-1">defineProps <a class="header-anchor" href="#defineprops" aria-hidden="true">#</a></h3><p><strong>defineProps</strong>-å­ç»„ä»¶æ¥æ”¶çˆ¶ç»„ä»¶çš„å€¼</p><div class="language-javascript"><pre><code><span class="token comment">// js</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token operator">:</span><span class="token punctuation">{</span>
    type<span class="token operator">:</span>String<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//ts withDefaults(tsç‰¹æœ‰çš„)</span>
<span class="token keyword">const</span> props1 <span class="token operator">=</span> <span class="token function">withDefaults</span><span class="token punctuation">(</span>defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span>string
<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span><span class="token string">&#39;xxx&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="defineemits" tabindex="-1">defineEmits <a class="header-anchor" href="#defineemits" aria-hidden="true">#</a></h3><p><strong>defineEmits</strong>-çˆ¶ç»„ä»¶æ¥æ”¶å­ç»„ä»¶çš„å€¼</p><div class="language-javascript"><pre><code><span class="token keyword">const</span> obj <span class="token operator">=</span> reactive<span class="token operator">&lt;</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">//js </span>
<span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;on-click&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">//ts</span>
<span class="token keyword">const</span> emit <span class="token operator">=</span> defineEmits<span class="token operator">&lt;</span><span class="token punctuation">{</span>
    <span class="token punctuation">(</span>e<span class="token operator">:</span><span class="token string">&#39;on-click&#39;</span><span class="token punctuation">,</span>obj<span class="token operator">:</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">clickTap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;on-click&#39;</span><span class="token punctuation">,</span>obj<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ref-defineexpose" tabindex="-1">ref (defineExpose) <a class="header-anchor" href="#ref-defineexpose" aria-hidden="true">#</a></h3><p><strong>ref</strong> -çˆ¶ç»„ä»¶ä½¿ç”¨å­ç»„ä»¶çš„å€¼æˆ–è€…æ–¹æ³•</p><div class="language-javascript"><pre><code><span class="token comment">// çˆ¶ç»„ä»¶ä»£ç </span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span><span class="token constant">A</span> ref<span class="token operator">=</span><span class="token string">&quot;child&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token constant">A</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">const</span> child <span class="token operator">=</span> ref<span class="token operator">&lt;</span>InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> <span class="token constant">A</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token comment">// å­ç»„ä»¶ä»£ç </span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> reactive<span class="token operator">&lt;</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;123&#39;</span><span class="token punctuation">)</span>

<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    obj<span class="token punctuation">,</span>
    name
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="æ¡ˆä¾‹-å°è£…ç€‘å¸ƒæµäº‹ä»¶" tabindex="-1">æ¡ˆä¾‹(å°è£…ç€‘å¸ƒæµäº‹ä»¶) <a class="header-anchor" href="#æ¡ˆä¾‹-å°è£…ç€‘å¸ƒæµäº‹ä»¶" aria-hidden="true">#</a></h3><p>ä½¿ç”¨jsæ¥å®ç°ç»å¯¹å®šä½,å…·ä½“ä»£ç å¦‚ä¸‹</p><div class="language-javascript"><pre><code>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> ç€‘å¸ƒæµæ¡ˆä¾‹ <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;wraps&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;{height:item.height+&#39;px&#39;,background:item.background,top:item.top+&#39;px&#39;,left:item.left + &#39;px&#39;}&quot;</span>
            v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in waterList&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;items&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;list&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> waterList <span class="token operator">=</span> reactive<span class="token operator">&lt;</span>any<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// å­˜å‚¨é«˜åº¦</span>
    <span class="token keyword">const</span> heightList<span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> width <span class="token operator">=</span> <span class="token number">130</span>
    <span class="token comment">// clientWidthå…ƒç´ çš„å®½åº¦ï¼ŒåŒ…å«padding</span>
    <span class="token keyword">const</span> x <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth

    <span class="token comment">// è®¡ç®—å‡ºä¸€åˆ—æ”¾å‡ æ¡æ•°æ®</span>
    <span class="token keyword">const</span> column <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>x <span class="token operator">/</span> width<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>column<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> props<span class="token punctuation">.</span>list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> column<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
            props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>left <span class="token operator">=</span> i <span class="token operator">*</span> width<span class="token punctuation">;</span>
            heightList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span>
            waterList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> current <span class="token operator">=</span> heightList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
            <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token comment">// æ‰¾å‡ºç¬¬ä¸€è¡Œæœ€å°çš„é«˜åº¦</span>
            heightList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">h<span class="token punctuation">,</span> inx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">&gt;</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    current <span class="token operator">=</span> h<span class="token punctuation">;</span>
                    index <span class="token operator">=</span> inx<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token punctuation">(</span>current <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>left <span class="token operator">=</span> index <span class="token operator">*</span> width<span class="token punctuation">;</span>
            <span class="token comment">// æ‹¼è£…ç¬¬äºŒè¡Œçš„é«˜åº¦</span>
            heightList<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span>  <span class="token punctuation">(</span>heightList<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">+</span> props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            waterList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function-variable function">onresize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style <span class="token operator">&gt;</span>
<span class="token punctuation">.</span>wraps <span class="token punctuation">{</span>
    position<span class="token operator">:</span> relative<span class="token punctuation">;</span>
    width<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token punctuation">.</span>items <span class="token punctuation">{</span>
    position<span class="token operator">:</span> absolute<span class="token punctuation">;</span>
    width<span class="token operator">:</span> <span class="token number">120</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre></div><h2 id="å…¨å±€ç»„ä»¶ï¼Œå±€éƒ¨ç»„ä»¶ï¼Œé€’å½’ç»„ä»¶" tabindex="-1">å…¨å±€ç»„ä»¶ï¼Œå±€éƒ¨ç»„ä»¶ï¼Œé€’å½’ç»„ä»¶ <a class="header-anchor" href="#å…¨å±€ç»„ä»¶ï¼Œå±€éƒ¨ç»„ä»¶ï¼Œé€’å½’ç»„ä»¶" aria-hidden="true">#</a></h2><h3 id="å…¨å±€ç»„ä»¶" tabindex="-1">å…¨å±€ç»„ä»¶ <a class="header-anchor" href="#å…¨å±€ç»„ä»¶" aria-hidden="true">#</a></h3><div class="language-javascript"><pre><code><span class="token comment">//main.ts</span>
<span class="token keyword">import</span> Card <span class="token keyword">from</span> <span class="token string">&#39;./components/Card/index.vue&#39;</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;Card&#39;</span><span class="token punctuation">,</span>Card<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span>

<span class="token comment">//å¦‚æœè¦æ³¨å†Œæ‰€æœ‰çš„ç»„ä»¶</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ElementPlusIconsVue <span class="token keyword">from</span> <span class="token string">&#39;@element-plus/icons-vue&#39;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> component<span class="token punctuation">]</span> <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>ElementPlusIconsVue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> component<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="é€’å½’ç»„ä»¶" tabindex="-1">é€’å½’ç»„ä»¶ <a class="header-anchor" href="#é€’å½’ç»„ä»¶" aria-hidden="true">#</a></h3><p>åŸç†å’Œjsé€’å½’æ˜¯ä¸€æ ·çš„ï¼Œè‡ªå·±è°ƒç”¨è‡ªå·±ï¼Œé€šè¿‡ä¸€ä¸ªæ¡ä»¶æ¥ç»“æŸé€’å½’ï¼Œå¦åˆ™å¯¼è‡´å†…å­˜æ³„æ¼</p><div class="language-vue"><pre><code>// çˆ¶ç»„ä»¶
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Tree</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Tree</span><span class="token punctuation">&gt;</span></span>
// å­ç»„ä»¶
// é€’å½’ç»„ä»¶
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click.stop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clickTap(item,$event)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in data<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.checked<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ item.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Tree</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item?.children?.length<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item?.children<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Tree</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">interface</span> <span class="token class-name">TreeList</span>  <span class="token punctuation">{</span>
  name<span class="token operator">:</span>string<span class="token punctuation">,</span>
  checked<span class="token operator">:</span>boolean<span class="token punctuation">,</span>
  children<span class="token operator">?</span><span class="token operator">:</span>TreeList<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
type Props<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    data<span class="token operator">?</span><span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> defineProps<span class="token operator">&lt;</span>Props<span class="token operator">&lt;</span>TreeList<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">clickTap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token operator">:</span>TreeList<span class="token punctuation">,</span>e<span class="token operator">:</span>Event</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
// é»˜è®¤é€’å½’ç»„ä»¶åç§°å°±æ˜¯æ–‡ä»¶åï¼Œè¿™é‡Œæ–°å»ºä¸€ä¸ªscriptæ¥å‘½å
// ä½¿ç”¨æ’ä»¶ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>xxx<span class="token punctuation">&#39;</span></span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>ts<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token string">&#39;tao&#39;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="åŠ¨æ€ç»„ä»¶" tabindex="-1">åŠ¨æ€ç»„ä»¶ <a class="header-anchor" href="#åŠ¨æ€ç»„ä»¶" aria-hidden="true">#</a></h3><p>è®©å¤šä¸ªç»„ä»¶ä½¿ç”¨åŒä¸€ä¸ªæŒ‚è½½ç‚¹ï¼Œå¹¶åŠ¨æ€åˆ‡æ¢</p><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    å½“å‰ç»„ä»¶ {{ currentTab }}
    <span class="token comment">&lt;!-- {{ tabs }} --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(_, tab) in tabs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tab<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[<span class="token punctuation">&#39;</span>tab-button<span class="token punctuation">&#39;</span>, { active: currentTab === tab }]<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentTab = tab<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ tab}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- &lt;Tree :data=&quot;data&quot;&gt;&lt;/Tree&gt; --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabs[currentTab]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token constant">A</span> <span class="token keyword">from</span> <span class="token string">&#39;./components/aciveComponent/A.vue&#39;</span>
<span class="token keyword">import</span> <span class="token constant">B</span> <span class="token keyword">from</span> <span class="token string">&#39;./components/aciveComponent/B.vue&#39;</span>
<span class="token keyword">import</span> <span class="token constant">C</span> <span class="token keyword">from</span> <span class="token string">&#39;./components/aciveComponent/C.vue&#39;</span>

<span class="token keyword">const</span> currentTab <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;A&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> tabs<span class="token operator">:</span>any <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>1.åœ¨vue2é€šè¿‡ç»„ä»¶ååˆ‡æ¢ï¼Œåœ¨vue3 setupæ˜¯é€šè¿‡ç»„ä»¶å®ä¾‹åˆ‡æ¢</p><p>2.å¦‚æœç»„ä»¶å®ä¾‹æ”¾åœ¨Reactiveï¼Œå¾—ä½¿ç”¨shallowRefæˆ–markRawè·³è¿‡proxyä»£ç†</p><h2 id="æ’æ§½" tabindex="-1">æ’æ§½ <a class="header-anchor" href="#æ’æ§½" aria-hidden="true">#</a></h2><p>æ’æ§½å°±æ˜¯å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä½¿ç”¨çš„ä¸€ä¸ªå ä½ç¬¦ï¼Œç”¨ã€Šslotã€‹ã€Š/slotã€‹æ¥è¡¨ç¤º</p><h3 id="åŒ¿åæ’æ§½" tabindex="-1">åŒ¿åæ’æ§½ <a class="header-anchor" href="#åŒ¿åæ’æ§½" aria-hidden="true">#</a></h3><p>åœ¨å­ç»„ä»¶æ”¾ç½®ä¸€ä¸ªæ’æ§½<code>&lt;slot&gt;&lt;/slot&gt;</code></p><h3 id="å…·åæ’æ§½" tabindex="-1">å…·åæ’æ§½ <a class="header-anchor" href="#å…·åæ’æ§½" aria-hidden="true">#</a></h3><p><code>&lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;</code> çˆ¶ç»„ä»¶ <code>&lt;template v-slot:header&gt;&lt;/template&gt;</code></p><h3 id="ä½œç”¨åŸŸæ’æ§½" tabindex="-1">ä½œç”¨åŸŸæ’æ§½ <a class="header-anchor" href="#ä½œç”¨åŸŸæ’æ§½" aria-hidden="true">#</a></h3><p>çˆ¶ç»„ä»¶ä½¿ç”¨å­ç»„ä»¶çš„æ•°æ®</p><div class="language-vue"><pre><code>// çˆ¶ç»„ä»¶
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>obj<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token string">&#39;å…µå“¥å“¥&#39;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span><span class="token number">20</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>


// å­ç»„ä»¶
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SlotA</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{data}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{data.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SlotA</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> SlotA <span class="token keyword">from</span> <span class="token string">&#39;./components/SlotA.vue&#39;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="åŠ¨æ€æ’æ§½" tabindex="-1">åŠ¨æ€æ’æ§½ <a class="header-anchor" href="#åŠ¨æ€æ’æ§½" aria-hidden="true">#</a></h3><p>æ’æ§½å¯ä»¥æ˜¯ä¸€ä¸ªå˜é‡å</p><p><code>&lt;template #[name]&gt;&lt;/template&gt;</code></p><h2 id="å¼‚æ­¥ç»„ä»¶-suspense" tabindex="-1">å¼‚æ­¥ç»„ä»¶&amp;Suspense <a class="header-anchor" href="#å¼‚æ­¥ç»„ä»¶-suspense" aria-hidden="true">#</a></h2><h3 id="ajax-å¼‚æ­¥çš„javascriptå’Œxml" tabindex="-1">Ajax(å¼‚æ­¥çš„javascriptå’ŒXML) <a class="header-anchor" href="#ajax-å¼‚æ­¥çš„javascriptå’Œxml" aria-hidden="true">#</a></h3><p>Ajaxçš„æ ¸å¿ƒæ˜¯XMLHttpRequestå¯¹è±¡</p><p>å¯¹è±¡æ–¹æ³•</p><p>1.const xhr = new XMLHttpRequest()</p><p>2.abort()å–æ¶ˆè¯·æ±‚</p><p>3.open(method,url,async,user,psw),method:è¯·æ±‚ç±»å‹ï¼Œurl:æ–‡ä»¶ä½ç½®,async:trueå¼‚æ­¥ falseåŒæ­¥</p><p>4.send()</p><p>onreadystatechange æ¯å½“readyStateå±æ€§æ”¹å˜ï¼Œå°±ä¼šè°ƒç”¨è¯¥å‡½æ•°</p><p>readyStateå…±æœ‰5ç§çŠ¶æ€</p><ul><li><p>0: è¯·æ±‚æœªåˆå§‹åŒ–</p></li><li><p>1: æœåŠ¡å™¨è¿æ¥å·²å»ºç«‹</p></li><li><p>2: è¯·æ±‚å·²æ¥æ”¶</p></li><li><p>3: è¯·æ±‚å¤„ç†ä¸­</p></li><li><p>4: è¯·æ±‚å·²å®Œæˆï¼Œä¸”å“åº”å·²å°±ç»ª</p></li></ul><p>status : 200:&#39;OK&#39; 404:&#39;æœªæ‰¾åˆ°é¡µé¢&#39;</p><h3 id="å°è£…axios" tabindex="-1">å°è£…axios <a class="header-anchor" href="#å°è£…axios" aria-hidden="true">#</a></h3><div class="language-javascript"><pre><code><span class="token keyword">export</span> <span class="token keyword">const</span> axios <span class="token operator">=</span> <span class="token punctuation">{</span>
    get<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>url<span class="token operator">:</span>string<span class="token punctuation">)</span><span class="token operator">:</span>Promise<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span>url<span class="token punctuation">)</span>
            xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span>
                   
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="suspense" tabindex="-1">Suspense <a class="header-anchor" href="#suspense" aria-hidden="true">#</a></h3><p>ä¸¤ä¸ªæ’æ§½</p><p>#defaultå±•ç¤ºå¼‚æ­¥ä¾èµ–åŠ è½½å®Œçš„ç»„ä»¶</p><p>#fallbackå±•ç¤ºåŠ è½½ä¸­çš„å†…å®¹</p><div class="language-vue"><pre><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Suspense</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>asyncCom</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>asyncCom</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#fallback</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Skeleton</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Skeleton</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Suspense</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> Skeleton <span class="token keyword">from</span> <span class="token string">&#39;./components/sync/Skeleton.vue&#39;</span>
<span class="token comment">// import asyncCom from &#39;./components/sync/Sync.vue&#39;</span>

<span class="token keyword">const</span> asyncCom<span class="token operator">:</span>any <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./components/sync/Sync.vue&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li>defineAsyncComponentæ–¹æ³•å¯æ¥æ”¶ä¸€ä¸ªè¿”å›Promiseçš„åŠ è½½å‡½æ•°</li><li>ä¹Ÿå¯æ­é…ESæ¨¡å—åŠ¨æ€å¯¼å…¥</li><li>ç”¨å¼‚æ­¥ç»„ä»¶æ‰“åŒ…ä¼šé¢å¤–ç”Ÿæˆä¸€ä¸ªjsæ–‡ä»¶ï¼Œå¯ä»¥ä¼˜åŒ–é¦–å±æ¸²æŸ“çš„æ—¶é—´</li></ul><h2 id="teleport" tabindex="-1">Teleport <a class="header-anchor" href="#teleport" aria-hidden="true">#</a></h2><p>å¯ä»¥å°†ä¸€ä¸ªç»„ä»¶å†…éƒ¨çš„ä¸€éƒ¨åˆ†æ¨¡ç‰ˆâ€œä¼ é€â€åˆ°è¯¥ç»„ä»¶çš„DOMç»“æ„å¤–å±‚çš„ä½ç½®å»</p><p>modalçš„æƒ…å†µä½¿ç”¨æ¯”è¾ƒå¤š</p><p><code>&lt;Teleport :disabled=&quot;isMobile&quot; to=&quot;body&quot;&gt;..&lt;/Teleport&gt;</code></p><p>å¤šä¸ª<code>&lt;Teleport&gt;</code></p></div></div><footer class="page-footer" data-v-8fcebc32 data-v-5c96fb00><div class="edit" data-v-5c96fb00><div class="edit-link" data-v-5c96fb00 data-v-55695e90><!----></div></div><div class="updated" data-v-5c96fb00><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"d78991b8\",\"pages_about.md\":\"be8e12d4\",\"pages_docs.md\":\"f8a46122\",\"pages_tags.md\":\"29999ec6\",\"posts_first.md\":\"ca1d9155\",\"posts_second.md\":\"7b4c6e0a\",\"posts_third.md\":\"1ec28bd1\"}")</script>
    <script type="module" async src="/vitepress-blog/assets/app.4138e7bc.js"></script>
    
  </body>
</html>