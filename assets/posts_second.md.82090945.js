import{o as n,c as s,f as a}from"./app.8989c0f8.js";const p='{"title":"vue3å­¦ä¹ ç¬”è®°","description":"è·Ÿç€bç«™å°æ»¡zså­¦ä¹ vue3","frontmatter":{"date":"2023-02-15","title":"vue3å­¦ä¹ ç¬”è®°","tags":["vue3","typescript"],"description":"è·Ÿç€bç«™å°æ»¡zså­¦ä¹ vue3"},"relativePath":"posts/second.md","lastUpdated":1676425868978}',t={},o=[a('<h5 id="ä»‹ç»vue" tabindex="-1">ä»‹ç»vue <a class="header-anchor" href="#ä»‹ç»vue" aria-hidden="true">#</a></h5><p>vueä½¿ç”¨äº†MVVM(Model-View-ViewModel) æ¶æ„</p><p>1.view:è§†å›¾å±‚(UIç”¨æˆ·ç•Œé¢)</p><p>2.viewModel:ä¸šåŠ¡é€»è¾‘å±‚(ä¸€åˆ‡jså¯è§†ä¸ºä¸šåŠ¡é€»è¾‘)</p><p>3.model:æ•°æ®å±‚(å­˜å‚¨æ•°æ®åŠå¯¹æ•°æ®çš„å¤„ç†å¦‚å¢åˆ æ”¹æŸ¥)</p><p>![image-20230214175506508](/Users/zhangzhentao/Library/Application Support/typora-user-images/image-20230214175506508.png)</p><h5 id="npm-run-devè¯¦è§£" tabindex="-1">npm run devè¯¦è§£ <a class="header-anchor" href="#npm-run-devè¯¦è§£" aria-hidden="true">#</a></h5><p>å…ˆä»æœ¬åœ°çš„node_modulesä¸­æŸ¥æ‰¾.binæ–‡ä»¶å¤¹é‡Œæ‰¾æœ‰æ²¡æœ‰viteå¯ä»¥æ‰§è¡Œï¼Œå¦‚æœæ²¡æœ‰ï¼Œä¼šå»å…¨å±€æ‰¾ï¼Œå…¨å±€æ²¡æœ‰çš„è¯ä¼šå»æ‰¾ç¯å¢ƒå˜é‡ï¼Œç¯å¢ƒå˜é‡æ²¡æœ‰çš„è¯ä¼šæŠ¥é”™ã€‚</p><h5 id="è™šæ‹Ÿdomã€diffç®—æ³•" tabindex="-1">è™šæ‹Ÿdomã€diffç®—æ³• <a class="header-anchor" href="#è™šæ‹Ÿdomã€diffç®—æ³•" aria-hidden="true">#</a></h5><ul><li>ä½¿ç”¨ASTé™æ€èŠ‚ç‚¹ğŸŒ²æ¥ä»£æ›¿domèŠ‚ç‚¹</li></ul><h6 id="_1-æ— keyçš„æ—¶å€™" tabindex="-1">1.æ— keyçš„æ—¶å€™ <a class="header-anchor" href="#_1-æ— keyçš„æ—¶å€™" aria-hidden="true">#</a></h6><p>![image-20230207095156844](/Users/zhangzhentao/Library/Application Support/typora-user-images/image-20230207095156844.png)</p><h6 id="_2-æœ‰keyçš„æ—¶å€™" tabindex="-1">2.æœ‰keyçš„æ—¶å€™ <a class="header-anchor" href="#_2-æœ‰keyçš„æ—¶å€™" aria-hidden="true">#</a></h6><p>![image-20230209091427062](/Users/zhangzhentao/Library/Application Support/typora-user-images/image-20230209091427062.png)</p><p>æœ€é•¿é€’å¢å­åºåˆ— * leetcode-300</p><p><a href="https://leetcode.cn/problems/longest-increasing-subsequence/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/longest-increasing-subsequence/</a></p><p>1.åŠ¨æ€è§„åˆ’(Dp)ï¼Œæ—¶é—´å¤æ‚åº¦O(n)Â²</p><div class="language-javascript"><pre><code> <span class="token operator">*</span><span class="token operator">/</span>\n<span class="token keyword">var</span> <span class="token function-variable function">lengthOfLIS</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     <span class="token keyword">let</span> dp <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> length<span class="token operator">:</span> nums<span class="token punctuation">.</span>length <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>\n                \n                <span class="token punctuation">}</span>\n            <span class="token punctuation">}</span> \n    <span class="token punctuation">}</span>\n    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>dp<span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre></div><p>2.è´ªå¿ƒç®—æ³•+äºŒåˆ†æ³•æŸ¥æ‰¾</p><div class="language-javascript"><pre><code><span class="token keyword">var</span> <span class="token function-variable function">lengthOfLIS</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// å¦‚æœå½“å‰æ•°å€¼å¤§äºå·²é€‰ç»“æœçš„æœ€åä¸€ä½ï¼Œåˆ™ç›´æ¥å¾€åæ–°å¢ï¼Œè‹¥å½“å‰æ•°å€¼æ›´å°ï¼Œåˆ™ç›´æ¥æ›¿æ¢å‰é¢ç¬¬ä¸€ä¸ªå¤§äºå®ƒçš„æ•°å€¼</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> result<span class="token punctuation">[</span>result<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            result<span class="token punctuation">[</span>result<span class="token punctuation">.</span>length<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n            <span class="token comment">// äºŒåˆ†æŸ¥æ‰¾ï¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºå½“å‰æ•°å€¼çš„ç»“æœè¿›è¡Œæ›¿æ¢</span>\n            <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> right <span class="token operator">=</span> result<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>\n            <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                <span class="token keyword">let</span> middle <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;&gt;</span><span class="token number">1</span><span class="token punctuation">;</span>\n                <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">[</span>middle<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                    left <span class="token operator">=</span> middle <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>\n                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n                    right <span class="token operator">=</span> middle<span class="token punctuation">;</span>\n                <span class="token punctuation">}</span>\n            <span class="token punctuation">}</span>\n            <span class="token comment">// æ›¿æ¢å½“å‰ä¸‹æ ‡</span>\n            result<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">return</span> result<span class="token punctuation">.</span>length<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre></div><h5 id="å“åº”å¼åŸç†" tabindex="-1">å“åº”å¼åŸç† <a class="header-anchor" href="#å“åº”å¼åŸç†" aria-hidden="true">#</a></h5><p>æœªå®Œå¾…ç»­â€¦â€¦</p><h5 id="ref" tabindex="-1">Ref <a class="header-anchor" href="#ref" aria-hidden="true">#</a></h5><ul><li><p><strong>ref</strong>ï¼Œæ¥å—ä¸€ä¸ªå†…éƒ¨å€¼ï¼Œè¿”å›ä¸€ä¸ªå“åº”å¼ã€å¯æ›´æ”¹çš„refå¯¹è±¡ï¼Œåªæœ‰ä¸€ä¸ªæŒ‡å‘å…¶å†…éƒ¨å€¼çš„å±æ€§.value</p></li><li><p><strong>isRef</strong>ï¼Œæ£€æµ‹æŸä¸ªå€¼æ˜¯å¦ä¸ºref</p></li><li><p><strong>toRef</strong>ï¼ŒåŸºäºå“åº”å¼å¯¹è±¡ä¸Šçš„ä¸€ä¸ªå±æ€§ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ refã€‚è¿™æ ·åˆ›å»ºçš„ ref ä¸å…¶æºå±æ€§ä¿æŒåŒæ­¥ï¼šæ”¹å˜æºå±æ€§çš„å€¼å°†æ›´æ–° ref çš„å€¼ï¼Œåä¹‹äº¦ç„¶ã€‚</p><div class="language-javascript"><pre><code><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  foo<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n  bar<span class="token operator">:</span> <span class="token number">2</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n<span class="token keyword">const</span> fooRef <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span>\n\n<span class="token comment">// æ›´æ”¹è¯¥ ref ä¼šæ›´æ–°æºå±æ€§</span>\nfooRef<span class="token punctuation">.</span>value<span class="token operator">++</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>foo<span class="token punctuation">)</span> <span class="token comment">// 2</span>\n\n<span class="token comment">// æ›´æ”¹æºå±æ€§ä¹Ÿä¼šæ›´æ–°è¯¥ ref</span>\nstate<span class="token punctuation">.</span>foo<span class="token operator">++</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fooRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 3</span>\n\n</code></pre></div></li><li><p><strong>toRefs</strong></p><div class="language-javascript"><pre><code><span class="token keyword">function</span> <span class="token function">useFeatureX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    foo<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n    bar<span class="token operator">:</span> <span class="token number">2</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n  <span class="token comment">// ...åŸºäºçŠ¶æ€çš„æ“ä½œé€»è¾‘</span>\n\n  <span class="token comment">// åœ¨è¿”å›æ—¶éƒ½è½¬ä¸º ref</span>\n  <span class="token keyword">return</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// å¯ä»¥è§£æ„è€Œä¸ä¼šå¤±å»å“åº”æ€§</span>\n<span class="token keyword">const</span> <span class="token punctuation">{</span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useFeatureX</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre></div></li><li><p><strong>shallowRef</strong> æµ…å±‚çš„å“åº”å¼ å¯ç”¨<strong>triggerRef</strong> å¼ºåˆ¶è§¦å‘ä¾èµ–äºä¸€ä¸ª<a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowref" target="_blank" rel="noopener noreferrer">æµ…å±‚ ref</a> çš„å‰¯ä½œç”¨</p><div class="language-javascript"><pre><code><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n<span class="token comment">// ä¸ä¼šè§¦å‘æ›´æ”¹</span>\nstate<span class="token punctuation">.</span>value<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">2</span>\n\n<span class="token comment">// ä¼šè§¦å‘æ›´æ”¹</span>\nstate<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>\n</code></pre></div></li><li><p>**customRef ** è‡ªå®šä¹‰çš„refï¼Œå¯ä»¥åŠ å…¥é˜²æŠ–ç­‰åŠŸèƒ½</p></li></ul><h5 id="reactive" tabindex="-1">Reactive <a class="header-anchor" href="#reactive" aria-hidden="true">#</a></h5><ul><li><p>reactive è¿”å›ä¸€ä¸ªå¯¹è±¡çš„å“åº”å¼ä»£ç†</p></li><li><p>shallowReactive</p></li><li><p>toRaw è¿”å›åŸå§‹å¯¹è±¡</p></li></ul><h5 id="computed" tabindex="-1">Computed <a class="header-anchor" href="#computed" aria-hidden="true">#</a></h5><div class="language-javascript"><pre><code><span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>\n<span class="token keyword">const</span> plusOne <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> count<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    count<span class="token punctuation">.</span>value <span class="token operator">=</span> val <span class="token operator">-</span> <span class="token number">1</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\nplusOne<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">1</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 0</span>\n</code></pre></div><h5 id="watch" tabindex="-1">Watch <a class="header-anchor" href="#watch" aria-hidden="true">#</a></h5><ul><li><strong>watch</strong></li></ul><div class="language-javascript"><pre><code><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token comment">// ç›‘å¬ä¸€ä¸ªgetterå‡½æ•°</span>\n<span class="token function">watch</span><span class="token punctuation">(</span>\n  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>count<span class="token punctuation">,</span>\n  <span class="token punctuation">(</span><span class="token parameter">count<span class="token punctuation">,</span> prevCount</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token comment">/* ... */</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span>\n<span class="token comment">// ç›‘å¬å¤šä¸ªå€¼</span>\n<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>fooRef<span class="token punctuation">,</span> barRef<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>foo<span class="token punctuation">,</span> bar<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>prevFoo<span class="token punctuation">,</span> prevBar<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token comment">/* ... */</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre></div><ul><li><p><strong>watchEffect</strong> é»˜è®¤immediate:trueï¼Œæ— éœ€æŒ‡å®šå±æ€§</p><div class="language-javascript"><pre><code><span class="token keyword">const</span> stop <span class="token operator">=</span> <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">effect</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n  <span class="token keyword">let</span> ipt<span class="token operator">:</span>HTMLInputElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;#ipt&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLInputElement\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ipt<span class="token punctuation">)</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message1<span class="token punctuation">.</span>value<span class="token punctuation">)</span>\n  <span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;before&#39;</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n \n<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>\n  flush<span class="token operator">:</span><span class="token string">&#39;post&#39;</span><span class="token comment">//åœ¨domæ¸²æŸ“ä¹‹åè°ƒç”¨ï¼Œé»˜è®¤ä¸ºpre</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre></div></li></ul><h5 id="ç”Ÿå‘½å‘¨æœŸ" tabindex="-1">ç”Ÿå‘½å‘¨æœŸ <a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a></h5><p>ä¸€ä¸ªç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯çš„è¿‡ç¨‹ç§°ä¸ºç”Ÿå‘½å‘¨æœŸ</p><p>vue3çš„ç»„åˆå¼api(setup)æ˜¯æ²¡æœ‰ beforeCreate å’Œ created ç”Ÿå‘½å‘¨æœŸçš„</p><h6 id="onbeforemount" tabindex="-1">onBeforeMount() <a class="header-anchor" href="#onbeforemount" aria-hidden="true">#</a></h6><p>åœ¨ç»„ä»¶DOMå®é™…æ¸²æŸ“å®‰è£…ä¹‹å‰è°ƒç”¨ï¼Œæ ¹å…ƒç´ è¿˜ä¸å­˜åœ¨</p><h6 id="onmounted" tabindex="-1">onMounted() <a class="header-anchor" href="#onmounted" aria-hidden="true">#</a></h6><p>åœ¨ç»„ä»¶çš„ç¬¬ä¸€æ¬¡æ¸²æŸ“åè°ƒç”¨ï¼Œå…è®¸ç›´æ¥DOMè®¿é—®</p><h6 id="onbeforeupdate" tabindex="-1">onBeforeUpdate() <a class="header-anchor" href="#onbeforeupdate" aria-hidden="true">#</a></h6><p>æ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹ŸDOMæ‰“è¡¥ä¸ä¹‹å‰</p><h6 id="onupdated" tabindex="-1">onUpdated() <a class="header-anchor" href="#onupdated" aria-hidden="true">#</a></h6><p>DOMæ›´æ–°åï¼Œupdatedçš„æ–¹æ³•å³ä¼šè°ƒç”¨</p><h6 id="onbeforeunmount" tabindex="-1">onBeforeUnmount() <a class="header-anchor" href="#onbeforeunmount" aria-hidden="true">#</a></h6><p>åœ¨å¸è½½ç»„ä»¶å®ä¾‹ä¹‹å‰è°ƒç”¨</p><h6 id="onunmounted" tabindex="-1">onUnmounted() <a class="header-anchor" href="#onunmounted" aria-hidden="true">#</a></h6><p>å¸è½½ç»„ä»¶å®ä¾‹åè°ƒç”¨ï¼Œè°ƒç”¨æ­¤é’©å­æ‰€æœ‰æŒ‡ä»¤éƒ½è¢«è§£é™¤ç»‘å®šï¼Œæ‰€æœ‰æ—¶é—´ä¾¦å¬å™¨éƒ½è¢«ç§»é™¤ï¼Œæ‰€æœ‰å­ç»„ä»¶å®ä¾‹è¢«å¸è½½</p><h5 id="çˆ¶å­ç»„ä»¶ä¼ å‚" tabindex="-1">çˆ¶å­ç»„ä»¶ä¼ å‚ <a class="header-anchor" href="#çˆ¶å­ç»„ä»¶ä¼ å‚" aria-hidden="true">#</a></h5><h6 id="defineprops" tabindex="-1">defineProps <a class="header-anchor" href="#defineprops" aria-hidden="true">#</a></h6><p><strong>defineProps</strong>-å­ç»„ä»¶æ¥æ”¶çˆ¶ç»„ä»¶çš„å€¼</p><div class="language-javascript"><pre><code><span class="token comment">// js</span>\n<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  data<span class="token operator">:</span><span class="token punctuation">{</span>\n    type<span class="token operator">:</span>String<span class="token punctuation">,</span>\n    <span class="token keyword">default</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token comment">//ts withDefaults(tsç‰¹æœ‰çš„)</span>\n<span class="token keyword">const</span> props1 <span class="token operator">=</span> <span class="token function">withDefaults</span><span class="token punctuation">(</span>defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span>\n    data<span class="token operator">:</span>string\n<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>\n    data<span class="token operator">:</span><span class="token string">&#39;xxx&#39;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre></div><h6 id="defineemits" tabindex="-1">defineEmits <a class="header-anchor" href="#defineemits" aria-hidden="true">#</a></h6><p><strong>defineEmits</strong>-çˆ¶ç»„ä»¶æ¥æ”¶å­ç»„ä»¶çš„å€¼</p><div class="language-javascript"><pre><code><span class="token keyword">const</span> obj <span class="token operator">=</span> reactive<span class="token operator">&lt;</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n<span class="token comment">//js </span>\n<span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;on-click&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n<span class="token comment">//ts</span>\n<span class="token keyword">const</span> emit <span class="token operator">=</span> defineEmits<span class="token operator">&lt;</span><span class="token punctuation">{</span>\n    <span class="token punctuation">(</span>e<span class="token operator">:</span><span class="token string">&#39;on-click&#39;</span><span class="token punctuation">,</span>obj<span class="token operator">:</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>\n<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token keyword">const</span> <span class="token function-variable function">clickTap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;on-click&#39;</span><span class="token punctuation">,</span>obj<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h6 id="ref-defineexpose" tabindex="-1">ref (defineExpose) <a class="header-anchor" href="#ref-defineexpose" aria-hidden="true">#</a></h6><p><strong>ref</strong> -çˆ¶ç»„ä»¶ä½¿ç”¨å­ç»„ä»¶çš„å€¼æˆ–è€…æ–¹æ³•</p><div class="language-javascript"><pre><code><span class="token comment">// çˆ¶ç»„ä»¶ä»£ç </span>\n<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>\n <span class="token operator">&lt;</span><span class="token constant">A</span> ref<span class="token operator">=</span><span class="token string">&quot;child&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token constant">A</span><span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>\n<span class="token keyword">const</span> child <span class="token operator">=</span> ref<span class="token operator">&lt;</span>InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> <span class="token constant">A</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>\n<span class="token comment">// å­ç»„ä»¶ä»£ç </span>\n<span class="token keyword">const</span> obj <span class="token operator">=</span> reactive<span class="token operator">&lt;</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;123&#39;</span><span class="token punctuation">)</span>\n\n<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    obj<span class="token punctuation">,</span>\n    name\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre></div><h6 id="æ¡ˆä¾‹-å°è£…ç€‘å¸ƒæµäº‹ä»¶" tabindex="-1">æ¡ˆä¾‹(å°è£…ç€‘å¸ƒæµäº‹ä»¶) <a class="header-anchor" href="#æ¡ˆä¾‹-å°è£…ç€‘å¸ƒæµäº‹ä»¶" aria-hidden="true">#</a></h6><p>ä½¿ç”¨jsæ¥å®ç°ç»å¯¹å®šä½,å…·ä½“ä»£ç å¦‚ä¸‹</p><div class="language-javascript"><pre><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> ç€‘å¸ƒæµæ¡ˆä¾‹ <span class="token operator">--</span><span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>\n    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;wraps&quot;</span><span class="token operator">&gt;</span>\n        <span class="token operator">&lt;</span>div <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;{height:item.height+&#39;px&#39;,background:item.background,top:item.top+&#39;px&#39;,left:item.left + &#39;px&#39;}&quot;</span>\n            v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in waterList&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;items&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>\n<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;list&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n\n<span class="token keyword">const</span> waterList <span class="token operator">=</span> reactive<span class="token operator">&lt;</span>any<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n<span class="token keyword">const</span> <span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token comment">// å­˜å‚¨é«˜åº¦</span>\n    <span class="token keyword">const</span> heightList<span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>\n    <span class="token keyword">const</span> width <span class="token operator">=</span> <span class="token number">130</span>\n    <span class="token comment">// clientWidthå…ƒç´ çš„å®½åº¦ï¼ŒåŒ…å«padding</span>\n    <span class="token keyword">const</span> x <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth\n\n    <span class="token comment">// è®¡ç®—å‡ºä¸€åˆ—æ”¾å‡ æ¡æ•°æ®</span>\n    <span class="token keyword">const</span> column <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>x <span class="token operator">/</span> width<span class="token punctuation">)</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>column<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> props<span class="token punctuation">.</span>list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> column<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>\n            props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>left <span class="token operator">=</span> i <span class="token operator">*</span> width<span class="token punctuation">;</span>\n            heightList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span>\n            waterList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n            <span class="token keyword">let</span> current <span class="token operator">=</span> heightList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>\n            <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n            <span class="token comment">// æ‰¾å‡ºç¬¬ä¸€è¡Œæœ€å°çš„é«˜åº¦</span>\n            heightList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">h<span class="token punctuation">,</span> inx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n                <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">&gt;</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                    current <span class="token operator">=</span> h<span class="token punctuation">;</span>\n                    index <span class="token operator">=</span> inx<span class="token punctuation">;</span>\n                <span class="token punctuation">}</span>\n            <span class="token punctuation">}</span><span class="token punctuation">)</span>\n            props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token punctuation">(</span>current <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>left <span class="token operator">=</span> index <span class="token operator">*</span> width<span class="token punctuation">;</span>\n            <span class="token comment">// æ‹¼è£…ç¬¬äºŒè¡Œçš„é«˜åº¦</span>\n            heightList<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span>  <span class="token punctuation">(</span>heightList<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">+</span> props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            waterList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    window<span class="token punctuation">.</span><span class="token function-variable function">onresize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>\n\n<span class="token operator">&lt;</span>style <span class="token operator">&gt;</span>\n<span class="token punctuation">.</span>wraps <span class="token punctuation">{</span>\n    position<span class="token operator">:</span> relative<span class="token punctuation">;</span>\n    width<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>\n    height<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>\n\n<span class="token punctuation">}</span>\n\n<span class="token punctuation">.</span>items <span class="token punctuation">{</span>\n    position<span class="token operator">:</span> absolute<span class="token punctuation">;</span>\n    width<span class="token operator">:</span> <span class="token number">120</span>px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>\n\n</code></pre></div>',60)];t.render=function(a,p,t,e,c,u){return n(),s("div",null,o)};export{p as __pageData,t as default};
